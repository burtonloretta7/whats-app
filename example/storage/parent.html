<!DOCTYPE html>
<html>
  <head>
    <title>Iframe Storage | Parent</title>
  </head>
  <body>
    <script type='text/javascript' src='../../dist/ift.js'></script>
    <script type='text/javascript' src='../../dist/IFTStorageService.js'></script>
    <script type='text/javascript' src='../util.js'></script>
    <script type='text/javascript'>
      var childUrl = location.protocol + '//' + getChildOptions();
      ift.parent({
        childOrigin: childUrl,
        childPath: getUrlPath('/example/storage/child.html')
      }).wiretap(function(direction, message) {
        ift.util.debug(direction, message);
      }).ready(function(manager) {
        var storage = manager.service('example', IFTStorageService.Consumer);
        storage.on('change', function(evt) {
          ift.util.debug('change event', evt);
        });
        storage.set('key', 'value', function() {
          storage.get('key', function(value) {
            ift.util.debug('got', value);
          });
        });
      });
    </script>
  </body>
</html>
