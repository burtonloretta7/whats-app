!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["iframe-transport"]=t():e["iframe-transport"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="/iframe.html",o=function i(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://iframe.chatid.com";n(this,i),this.create_iframe=function(){e.iframe_loaded=!1,e.iframe=document.createElement("iframe"),e.iframe.src=e.iframe_domain+r,e.iframe.sandbox="allow-scripts allow-same-origin",e.iframe.height=0,e.iframe.width=0,e.iframe.style.visibility="hidden",document.body.appendChild(e.iframe)},this.on=function(t,n){e.cbs[t]=n},this.start_listening=function(){var t=e,n=function(n){var r=n.data;if("loaded"==r.action)t.iframe_loaded=!0;else if(n.origin!==t.iframe_domain)return;r.action in e.cbs&&e.cbs[r.action](r.data)};window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",function(){return n(window.event)})},this.iframe_send=function(t){if(!e.iframe_loaded)throw"not ready";e.iframe.contentWindow.postMessage(t,e.iframe_domain)},this.get=function(){return e.iframe_send({action:"get"})},this.broadcast=function(t){return e.iframe_send({action:"broadcast",data:t})},this.poll=function(){setInterval(function(){return e.iframe_send({action:"poll"})},300)},this.reset=function(){return e.iframe_send({action:"reset"})},this.iframe_domain=t,this.create_iframe(),this.start_listening(),this.cbs={}};t["default"]=o}])});